# Sistema de GestiÃ³n de Restaurante

Sistema completo de gestiÃ³n de restaurante desarrollado con Django que implementa tres patrones de diseÃ±o fundamentales.

## ğŸ¯ Patrones de DiseÃ±o Implementados

### 1. **Singleton (Creacional)**
- **UbicaciÃ³n:** `restaurant/patterns/singleton/config_manager.py`
- **PropÃ³sito:** GestiÃ³n Ãºnica de configuraciÃ³n del restaurante
- **Uso:** Impuestos, propinas, horarios, capacidad

### 2. **Decorator (Estructural)**
- **UbicaciÃ³n:** `restaurant/patterns/decorator/view_decorators.py`
- **PropÃ³sito:** AÃ±adir funcionalidades a vistas dinÃ¡micamente
- **Implementaciones:**
  - `@log_view_access` - Logging de accesos
  - `@require_role` - Control de permisos por rol
  - `@measure_performance` - MediciÃ³n de rendimiento

### 3. **Observer (Comportamiento)**
- **UbicaciÃ³n:** `restaurant/patterns/observer/observers.py`
- **PropÃ³sito:** Sistema de notificaciones automÃ¡ticas
- **Observadores:**
  - `CocinaObserver` - Notificaciones a cocina
  - `MeseroObserver` - Notificaciones a meseros
  - `AdministradorObserver` - Monitoreo general

## ğŸ› ï¸ TecnologÃ­as Utilizadas

- **Framework:** Django 4.2+
- **Base de datos:** SQLite (desarrollo)
- **Frontend:** Bootstrap 5
- **Lenguaje:** Python 3.8+

## ğŸ“‹ Requisitos Previos

- Python 3.8 o superior
- pip (gestor de paquetes de Python)
- Git (opcional)

## ğŸš€ InstalaciÃ³n

### 1. Clonar o descargar el proyecto
```bash
cd restaurant_management
```

### 2. Crear entorno virtual

**Windows:**
```bash
python -m venv venv
venv\Scripts\activate
```

**Mac/Linux:**
```bash
python3 -m venv venv
source venv/bin/activate
```

### 3. Instalar dependencias
```bash
pip install django pillow
```

### 4. Crear estructura de carpetas para media
```bash
mkdir media
mkdir media/platillos
mkdir media/facturas
```

### 5. Aplicar migraciones
```bash
python manage.py makemigrations
python manage.py migrate
```

### 6. Cargar datos de prueba
```bash
python manage.py init_data
```

Este comando crearÃ¡:
- âœ… Grupos de usuarios (admin, mesero, cocina, caja)
- âœ… Usuarios de prueba con contraseÃ±as
- âœ… CategorÃ­as de platillos
- âœ… Platillos de ejemplo
- âœ… Mesas del restaurante
- âœ… MÃ©todos de pago
- âœ… ConfiguraciÃ³n inicial (Singleton)

### 7. Ejecutar el servidor
```bash
python manage.py runserver
```

### 8. Acceder al sistema

Abre tu navegador en: `http://127.0.0.1:8000`

## ğŸ‘¤ Credenciales de Acceso

| Usuario  | ContraseÃ±a  | Rol            | Permisos                    |
|----------|-------------|----------------|-----------------------------|
| admin    | admin123    | Administrador  | Acceso completo al sistema  |
| mesero1  | mesero123   | Mesero         | GestiÃ³n de pedidos y mesas  |
| cocina1  | cocina123   | Cocina         | Ver y actualizar pedidos    |
| caja1    | caja123     | Caja           | Procesar pagos              |

## ğŸ“ Estructura del Proyecto
```
restaurant_management/
â”œâ”€â”€ restaurant_project/          # ConfiguraciÃ³n del proyecto Django
â”‚   â”œâ”€â”€ settings.py
â”‚   â”œâ”€â”€ urls.py
â”‚   â””â”€â”€ wsgi.py
â”œâ”€â”€ restaurant/                  # AplicaciÃ³n principal
â”‚   â”œâ”€â”€ models.py               # Modelos de datos
â”‚   â”œâ”€â”€ views.py                # Vistas
â”‚   â”œâ”€â”€ forms.py                # Formularios
â”‚   â”œâ”€â”€ urls.py                 # URLs de la app
â”‚   â”œâ”€â”€ admin.py                # ConfiguraciÃ³n del admin
â”‚   â”œâ”€â”€ patterns/               # Patrones de diseÃ±o
â”‚   â”‚   â”œâ”€â”€ singleton/
â”‚   â”‚   â”‚   â””â”€â”€ config_manager.py
â”‚   â”‚   â”œâ”€â”€ decorator/
â”‚   â”‚   â”‚   â””â”€â”€ view_decorators.py
â”‚   â”‚   â””â”€â”€ observer/
â”‚   â”‚       â””â”€â”€ observers.py
â”‚   â””â”€â”€ management/
â”‚       â””â”€â”€ commands/
â”‚           â””â”€â”€ init_data.py
â”œâ”€â”€ templates/                   # Plantillas HTML
â”‚   â”œâ”€â”€ base.html
â”‚   â”œâ”€â”€ registration/
â”‚   â””â”€â”€ restaurant/
â”œâ”€â”€ media/                       # Archivos subidos
â”œâ”€â”€ static/                      # Archivos estÃ¡ticos
â”œâ”€â”€ db.sqlite3                   # Base de datos
â””â”€â”€ README.md
```

## ğŸ® Funcionalidades Principales

### GestiÃ³n de Mesas
- âœ… CRUD completo de mesas
- âœ… VisualizaciÃ³n de estado (ocupada/disponible)
- âœ… CreaciÃ³n rÃ¡pida de pedidos desde mesa

### GestiÃ³n de Pedidos
- âœ… Crear pedidos por mesa
- âœ… Agregar/quitar platillos
- âœ… Cambio de estados (Pendiente â†’ En PreparaciÃ³n â†’ Listo â†’ Entregado)
- âœ… **Notificaciones automÃ¡ticas** (PatrÃ³n Observer)

### GestiÃ³n de Platillos
- âœ… CRUD completo de platillos
- âœ… CategorizaciÃ³n
- âœ… BÃºsqueda y filtros
- âœ… ImÃ¡genes de platillos

### ConfiguraciÃ³n del Restaurante
- âœ… ConfiguraciÃ³n Ãºnica (PatrÃ³n Singleton)
- âœ… Impuestos personalizables
- âœ… Propina sugerida
- âœ… Horarios y capacidad

### Sistema de Pagos
- âœ… MÃºltiples mÃ©todos de pago
- âœ… CÃ¡lculo automÃ¡tico de totales
- âœ… Propina sugerida basada en configuraciÃ³n

## ğŸ“Š DemostraciÃ³n de Patrones

### PatrÃ³n Singleton en acciÃ³n:
```python
from restaurant.patterns.singleton.config_manager import RestaurantConfig

# Primera instancia
config1 = RestaurantConfig()
config1.set_impuesto(0.16)

# Segunda "instancia" (en realidad es la misma)
config2 = RestaurantConfig()
print(config2.get_impuesto())  # Output: 0.16

# Ambas son la misma instancia
print(config1 is config2)  # Output: True
```

### PatrÃ³n Observer en acciÃ³n:

Cuando cambias el estado de un pedido, automÃ¡ticamente se notifica a:
- ğŸ³ Cocina (nuevos pedidos y cancelaciones)
- ğŸ§‘â€ğŸ³ Meseros (pedidos listos)
- ğŸ‘” Administrador (todos los eventos)

VerÃ¡s las notificaciones en la consola del servidor.

### PatrÃ³n Decorator en acciÃ³n:
```python
@login_required
@log_view_access          # Registra cada acceso
@require_role('mesero')   # Solo meseros pueden acceder
@measure_performance      # Mide tiempo de ejecuciÃ³n
def crear_pedido(request):
    # ...
```

## ğŸ“ Logging

El sistema registra todos los eventos en `restaurant.log`:
- Accesos a vistas (Decorator)
- Cambios de estado en pedidos (Observer)
- Operaciones CRUD
- Errores y advertencias

## ğŸ§ª Pruebas

Para probar el sistema completo:

1. **Login como admin** â†’ Configurar el restaurante
2. **Login como mesero1** â†’ Crear un pedido en una mesa
3. **Observa la consola** â†’ VerÃ¡s las notificaciones del Observer
4. **Login como cocina1** â†’ Cambiar estado a "En PreparaciÃ³n"
5. **Observa nuevamente** â†’ MÃ¡s notificaciones
6. **Login como caja1** â†’ Procesar el pago

## ğŸ› SoluciÃ³n de Problemas

### Error: "No module named 'restaurant'"
```bash
# AsegÃºrate de estar en el directorio correcto
cd restaurant_management
python manage.py runserver
```

### Error: "Table doesn't exist"
```bash
python manage.py makemigrations
python manage.py migrate
```

### Las imÃ¡genes no se muestran
```bash
# Verifica que exista la carpeta media
mkdir -p media/platillos
```

## ğŸ“š DocumentaciÃ³n Adicional

- **Modelos:** Ver `restaurant/models.py`
- **Patrones:** Ver carpeta `restaurant/patterns/`
- **Forms:** Ver `restaurant/forms.py`
- **Admin:** Accede a `/admin` con usuario `admin`

## ğŸ‘¨â€ğŸ’» Autor

[Tu Nombre] - Grupo IDGS71N
Arquitecturas de Software - UTCH

## ğŸ“… Fecha

Noviembre 2024

## ğŸ“„ Licencia

Este proyecto es con fines educativos.